const albums = [
  {
    imageURL: "../assets/images/albums/music-parachutes.jpg",
    title: "parachutes",
    year: 2000,
    songs: [
      "don't panic",
      "shiver",
      "spices",
      "sparks",
      "yellow",
      "truble",
      "parachutes",
      "high speed",
      "we never change",
      "everything's not",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-xy.jpg",
    title: "x & y",
    year: 2005,
    songs: [
      "squad one",
      "what if",
      "white shadows",
      "fix you",
      "talk",
      "x & y",
      "speed of sound",
      "a message",
      "low",
      "the hardest part",
      "swallowed in the sea",
      "twisted logic",
      "'til kindom come",
    ],
    links: [""],
  },

  {
    imageURL: "../assets/images/albums/moon-music.jpg",
    title: "moon music",
    year: 2024,
    songs: [
      "moon music",
      "feels like im falling in love",
      "we pray",
      "jupiter",
      "good feeling",
      "ðŸŒˆ",
      "iaam",
      "aeterna",
      "all my love",
      "one world",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-arushofbloodtothehead.jpg",
    title: "a rush of blood to the head",
    year: 2002,
    songs: [
      "politik",
      "im my place",
      "god put a smile upon your face",
      "the scientist",
      "clocks",
      "daylight",
      "green eyes",
      "warning sign",
      "a whisper",
      "a rush of blood to the head",
      "amsterdam",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-buenos-aires.jpg",
    title: "live in buenos aires",
    year: 2018,
    songs: [
      "a head full of dreams",
      "yellow",
      "every teardop is a waterfall",
      "the scientist",
      "got put a smile upon your face",
      "paradise",
      "magic",
      "everglow",
      "clocks",
      "midnight",
      "charlie brown",
      "hymn for the weekend",
      "fix you",
      "viva la vida",
      "adventure of a lifetime",
      "de mÃ¹sica ligera",
      "colour spectrun",
      "im my place",
      "amor argentina",
      "something just like this",
      "a sky full of stars",
      "up&up",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-everyday-life.jpg",
    title: "everyday life",
    year: 2019,
    songs: [
      "sunrise",
      "church",
      "truble in town",
      "broken",
      "daddy",
      "wotw/potp",
      "arabesque",
      "when i need a friend",
      "guns",
      "orphans",
      "Ã¨kÃ³",
      "cry cry cry",
      "old friends",
      "Ø¨Ù†ÛŒ Ø¢Ø¯Ù…",
      "champion of the world",
      "everyday life",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-full-of-dreams.jpg",
    title: "a head full of dreams",
    year: 2015,
    songs: [
      "a head full of dreams",
      "birds",
      "hymn for the weekend",
      "everglow",
      "adventure of the a lifetime",
      "fun",
      "kaleidoscope",
      "army of one",
      "amazing day",
      "colour spectrum",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-ghoststories.jpg",
    title: "ghost stories",
    year: 2014,
    songs: [
      "always in my head",
      "magic",
      "ink",
      "true love",
      "midnight",
      "another's arms",
      "oceans",
      "a sky full of stars",
      "o",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-Kaleidoscope.jpg",
    title: "Kaleidoscope",
    year: 2017,
    songs: [
      "all i can think about is you",
      "miracles (someone special) - coldplay & big sean",
      "aliens",
      "something just like this (tokyo remix) - coldplay & the chainsmokers",
      "hypnotised",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-myloxyloto.jpg",
    title: "myloxyloto",
    year: 2011,
    songs: [
      "mylo xyloto",
      "hurts like heaven",
      "paradise",
      "charlie brown",
      "us against the world",
      "m.m.i.x",
      "every teardrop is a waterfall",
      "major minus",
      "u.f.o",
      "princess of china",
      "up in flames",
      "a hopeful transmission",
      "don't let it break your heart",
      "up with the birds",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-spheres.jpg",
    title: "music of the spheres",
    year: 2021,
    songs: [
      "ðŸª",
      "higher power",
      "humankind",
      "âœ¨",
      "let somebody go",
      "â¤ï¸",
      "people of the pride",
      "biutyful",
      "ðŸŒŽ",
      "my universe",
      "â™¾ï¸",
      "coloratura",
    ],
    links: [""],
  },
  {
    imageURL: "../assets/images/albums/music-vivalavida.jpg",
    title: "viva la vida",
    year: 2008,
    songs: [
      "life in technicolor",
      "cemeteries of london",
      "lost!",
      "42",
      "lovers in japan / reign of love",
      "yes",
      "viva la vida",
      "violet hill",
      "strawberry swing",
      "death and all his friends",
    ],
    links: [""],
  },
];

const singles = [
  {
    title: "all my Love",
    imgURL: "../assets/images/singles/single-allmylove.webp",
    released: 2024,
  },
  {
    title: "something just like this",
    imgURL: "../assets/images/singles/single-somethingjustlikethis.jpg",
    released: 2017,
  },
  {
    title: "adventure of a lifetime",
    imgURL: "../assets/images/singles/single-adventureofalifetime.jpg",
    released: 2015,
  },
  {
    title: "a sky full of stars ep",
    imgURL: "../assets/images/singles/single-askyfullofstars.jpg",
    released: 2014,
  },
  {
    title: "magic",
    imgURL: "../assets/images/singles/single-magic.jpg",
    released: 2014,
  },
  {
    title: "speed of sound",
    imgURL: "../assets/images/singles/single-speedofsound.jpg",
    released: 2005,
  },
  {
    title: "princess of china",
    imgURL: "../assets/images/singles/single-princessofchina.jpg",
    released: 2012,
  },
  {
    title: "lost",
    imgURL: "../assets/images/singles/single-lost.jpg",
    released: 2008,
  },
  {
    title: "yellow",
    imgURL: "../assets/images/singles/single-yellow.jpg",
    released: 2000,
  },
  {
    title: "safety ep",
    imgURL: "../assets/images/singles/single-safetyep.jpg",
    released: 1998,
  },
];

const displayButtons = document.querySelectorAll(".music-box-button");
const displayContent = document.querySelectorAll(".music-box__content");
//
const albumContainer = document.querySelector(".albums");
const singlesContainer = document.querySelector(".singles");
const songsContainer = document.querySelector(".songs");
//
const slideContainer = document.querySelector(".music-box__slides-container");
const dotContainer = document.querySelector(".music-box__dot-container");
const nextButton = document.querySelector(".next");
const previusButton = document.querySelector(".previous");
//

let activeAlbum = 0;

// displaying content by click event on buttons on broswer.
displayButtons.forEach((button, index) => {
  button.addEventListener("click", (e) => {
    displayContent.forEach((display) => {
      display.classList.remove("music-box__content--active");
    });
    displayButtons.forEach((btn) => {
      btn.classList.remove("music-box-button--active");
    });

    e.target.classList.add("music-box-button--active");
    displayContent[index].classList.add("music-box__content--active");

    if (index === 0) {
      createAlbumContent(albums);
      displayActiveAlbum();
    } else if (index === 1) {
      creatingSinglesContent();
    } else if (index === 2) {
      const groupSongs = organizeSongContent();
      createSongContent(groupSongs);
    }
  });
});

// creating slides/dots from albums Array
const createAlbumContent = (albumsArray) => {
  slideContainer.textContent = "";
  dotContainer.textContent = "";

  albumsArray.forEach((album, index) => {
    const slide = document.createElement("div");
    slide.classList.add("music-box__slides");
    slide.dataset.index = index;

    // front cover
    const slideFrontCover = document.createElement("div");
    slideFrontCover.classList.add("music-box__slides-cover", "fade-in");
    slideFrontCover.dataset.index = index;

    const imageContainer = document.createElement("div");
    imageContainer.classList.add("music-box__slides-image-contaner");

    const imageElement = document.createElement("img");
    imageElement.classList.add("music-box__slides-image");
    imageElement.src = album.imageURL;
    imageElement.alt = `${album.title} album image`;

    const frontCoverTitle = document.createElement("h3");
    frontCoverTitle.classList.add("music-box__slides-title-front-cover");
    frontCoverTitle.textContent = album.title;

    const year = document.createElement("p");
    year.classList.add("music-box__slides-year");
    year.textContent = album.year;

    // back cover
    const slideBackCover = document.createElement("div");
    slideBackCover.classList.add("music-box__slides-back");
    slideBackCover.dataset.index = index;

    const backCoverTitle = document.createElement("h3");
    backCoverTitle.classList.add("music-box__slides-title-back-cover");
    backCoverTitle.textContent = album.title;

    const backCoverlist = document.createElement("ol");
    backCoverlist.classList.add("music-box__slides-list");

    album.songs.forEach((song) => {
      const backCoverListItem = document.createElement("li");
      backCoverListItem.classList.add("music-box__slides-list-item");
      backCoverListItem.textContent = song;
      backCoverlist.append(backCoverListItem);
    });

    // for slip-effect on albums
    slide.addEventListener("click", () => {
      slideFrontCover.classList.toggle("fade-in");
      slideBackCover.classList.toggle("fade-in");
    });

    // appending created content together
    imageContainer.append(imageElement);
    slideFrontCover.append(imageContainer, frontCoverTitle, year);
    slideBackCover.append(backCoverTitle, backCoverlist);
    slide.append(slideFrontCover, slideBackCover);
    slideContainer.append(slide);

    // dots
    const dot = document.createElement("span");
    dot.classList.add("music-box__dot");
    dot.dataset.index = index;
    dot.addEventListener("click", () => {
      showAlbum(index);
    });
    dotContainer.append(dot);
  });
};

// using dots index to display correct album in slidshow.
const displayActiveAlbum = () => {
  const slides = document.querySelectorAll(".music-box__slides");
  const dots = document.querySelectorAll(".music-box__dot");

  slides.forEach((slide, index) => {
    slide.classList.toggle("music-box__slides--active", index === activeAlbum);
  });

  dots.forEach((dot, index) => {
    dot.classList.toggle("music-box__dot--active", index === activeAlbum);
  });
  updateDot();
};

const showAlbum = (index) => {
  activeAlbum = index;
  displayActiveAlbum();
};

// adding to when clickevent on dot happens, follows index to show correct album
const updateDot = () => {
  const dots = document.querySelectorAll(".music-box__dot");
  dots.forEach((dot, index) => {
    dot.classList.toggle("music-box__dot--active", index === activeAlbum);
  });
};

// adding click event next/previous button. loops trough the albums
nextButton.addEventListener("click", () => {
  activeAlbum = (activeAlbum + 1) % albums.length;
  displayActiveAlbum();
});

previusButton.addEventListener("click", () => {
  activeAlbum = (activeAlbum - 1 + albums.length) % albums.length;
  displayActiveAlbum();
});
// ---------------------- single content ---------------

// creating cards form single Array
const creatingSinglesContent = () => {
  singlesContainer.textContent = "";
  singles.forEach((single) => {
    const singleComponent = document.createElement("div");
    singleComponent.classList.add("music-box__singles-card");

    const singleImg = document.createElement("img");
    singleImg.classList.add("music-box__singles-card-img");
    singleImg.src = single.imgURL;
    singleImg.alt = `Imagecover for ${single.title}`;

    const singleTitle = document.createElement("h3");
    singleTitle.classList.add("music-box__singles-card-title");
    singleTitle.textContent = single.title;

    const singleReleased = document.createElement("p");
    singleReleased.classList.add("music-box__singles-card-releaseyear");
    singleReleased.textContent = single.released;

    singleComponent.append(singleImg, singleTitle, singleReleased);
    singlesContainer.append(singleComponent);
  });
};

//  -------------------------   song content  -------------------------------------------

// extracting songs from albums and organizing in alphabetical / #
const organizeSongContent = () => {
  const allSongs = albums.flatMap((album) => {
    return album.songs || [];
  });

  const sortSongs = allSongs.sort((a, b) => {
    return a.toLowerCase().localeCompare(b.toLowerCase());
  });

  const groupSongs = sortSongs.reduce((acc, song) => {
    const firstLetter = song[0];
    const groupKey = /^[A-Za-z]$/.test(firstLetter)
      ? firstLetter.toUpperCase()
      : "#";

    if (!acc[groupKey]) {
      acc[groupKey] = [];
    }

    acc[groupKey].push(song);

    return acc;
  }, {});

  return groupSongs;
};

// creating content for song section
const createSongContent = (groupSongs) => {
  songsContainer.textContent = "";
  for (let [letter, songs] of Object.entries(groupSongs)) {
    const letterContainer = document.createElement("div");
    letterContainer.classList.add("music-box__letter-container");

    const letterTitle = document.createElement("h3");
    letterTitle.classList.add("music-box__letter-title");
    letterTitle.textContent = letter === "#" ? "#" : letter;

    const songlistContainer = document.createElement("div");
    songlistContainer.classList.add("music-box__song-list-container");

    songs.forEach((song) => {
      const songListItem = document.createElement("span");
      songListItem.classList.add("music-box__song");
      songListItem.textContent = song;
      songlistContainer.append(songListItem);
    });

    letterContainer.append(letterTitle);
    songsContainer.append(letterContainer, songlistContainer);
  }
};
